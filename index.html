<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encrypt API</title>
</head>
<body>
    <h1>Encrypt Input</h1>
    <form id="encrypt-form">
        <label for="key">Key:</label>
        <input type="text" id="key" name="key" required><br><br>

        <label for="source">Source:</label>
        <input type="text" id="source" name="source" required><br><br>

        <label for="createDate">Create Date:</label>
        <input type="text" id="createDate" name="createDate" required><br><br>

        <button type="submit">Encrypt</button>
    </form>

    <h2>Encrypted Result</h2>
    <pre id="result"></pre>

    <script>
        // 監聽表單提交事件
        document.getElementById('encrypt-form').addEventListener('submit', async function(event) {
            event.preventDefault();  // 防止表單重新載入頁面

            // 獲取用戶輸入的值
            const key = document.getElementById('key').value;
            const source = document.getElementById('source').value;
            const createDate = document.getElementById('createDate').value;

            // 構造後端 API 的 URL，並將用戶輸入作為參數傳遞
            const url = `http://127.0.0.1:5000/api/encrypt?key=${key}&source=${source}&createDate=${createDate}`;

            try {
                // 發送 GET 請求到後端
                const response = await fetch(url);

                // 檢查是否返回成功的狀態碼 (200 OK)
                if (response.ok) {
                    const data = await response.json();  // 解析返回的 JSON 數據
                    document.getElementById('result').textContent = `Encrypted Result: ${data.encrypted}`;
                } else {
                    document.getElementById('result').textContent = `Error: ${response.statusText}`;
                }
            } catch (error) {
                document.getElementById('result').textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
